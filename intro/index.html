<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Getting started - rk</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Getting started";
        var mkdocs_page_input_path = "intro.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> rk
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Rockchip bare metal reference</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../custom_ddr_image/">Custom DDR images</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Getting started</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#development">Development</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#how-to-program-rockchip-hardware">How to program Rockchip hardware</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#memory">Memory</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ref/">References</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Devices</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../devices/genbook/">Genbook / Cool-pi notebook</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../devices/orangepi/">Orange Pi</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../devices/pinebook/">Pinebook Pro</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Rk3399</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../rk3399/boot/">Boot</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../rk3399/disp/">VOP</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Rk3588</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../rk3588/boot/">RK3588 bare metal bringup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../rk3588/bootrom/">RK3588 bootrom function</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../rk3588/clock/">RK3588 Clocks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../rk3588/disp/">RK3588 Display Docs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../rk3588/hdmi/">RK3588 display init sequence</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">rk</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Getting started</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="getting-started">Getting started</h1>
<h2 id="development">Development</h2>
<p>The best way to setup a rockchip device for bare-metal development is by enabling the 'maskrom' interface that allows custom images to be loaded
over an OTG port.</p>
<p>In order to get this working, you have to make all bootable mediums un-bootable by the bootrom. This includes emmc, any SPI flash, or
sdmmc. You don't have to completely erase these devices, you just need to erase the rockchip magic at the start (<code>RKNS</code> or <code>RK33</code>)</p>
<p>This wiki has instructions for how to do this on various rockchip devices, see Devices/</p>
<p>For most devices you will need a usb-c to usb-a data cable to plug it into your dev machine. In other cases you will need a usb-a to usb-a
cable.</p>
<p>Once you get your rockchip device setup and plugged in (check <code>dmesg -w</code>), you will need a tool to send the images over USB.
This repo includes a tool (<code>make rock.out</code>) that can do this. You can also use <a href="https://github.com/xboot/xrock">xrock</a>.</p>
<p>For RK3399 devices:
<pre class="highlight"><code>xrock &lt;ddr_img&gt; &lt;os_img&gt;
./rock.out --v1 --ddr &lt;ddr_img&gt; --os &lt;os_img&gt;</code></pre>
For RK3588 devices:
<pre class="highlight"><code>xrock &lt;ddr_img&gt; &lt;os_img&gt; --rc4-off
./rock.out --v2 --ddr &lt;ddr_img&gt; --os &lt;os_img&gt;</code></pre></p>
<h2 id="how-to-program-rockchip-hardware">How to program Rockchip hardware</h2>
<p>The best way to learn how to program certain Rockchip hardware is study the its device tree file.
A device tree describes how all the hardware in a device is wired and setup, and how to configure it (turning on GPIO pins, changing iomux functions)
It will map devices such as fans, LEDs, I2C devices, screens, any other non-enumerable hardware.</p>
<p>For example, here's the DTS file for the Genbook: https://github.com/torvalds/linux/blob/master/arch/arm64/boot/dts/rockchip/rk3588-coolpi-cm5-genbook.dts</p>
<p>Schematics, if available, are also just as useful.</p>
<h2 id="memory">Memory</h2>
<p>On the RK3588, physical memory from <code>0x0</code>-<code>0xa00000</code> appears to be reserved for
secure world only. If you try and execute code in non-secure state (EL0-EL2) then
you'll get a '32-bit instruction trap' exception brought up in EL3.</p>
<p>The RK3399 has the same situation but the range is <code>0x0</code>-<code>0x200000</code>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../custom_ddr_image/" class="btn btn-neutral float-left" title="Custom DDR images"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../ref/" class="btn btn-neutral float-right" title="References">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../custom_ddr_image/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../ref/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
